# Cost Optimized Environment Template
# Designed to minimize resource usage and cost
# Suitable for deployments with lower traffic volumes or budget constraints

# === Core Proxy Settings ===
# Reduced worker count to minimize resource usage
Workers=5
# Smaller queue to reduce memory usage
MaxQueueLength=5
# Shorter timeout to free up resources faster (5 minutes)
Timeout=300000
# Standard polling with longer intervals to reduce CPU usage
PollInterval=20000
PollTimeout=5000

# === Priority & Queue Management ===
# Simplified priority system
DefaultPriority=2
PriorityKeyHeader=S7PPriorityKey
PriorityKeys=normal,high
PriorityValues=2,1
# Minimal worker allocation
PriorityWorkers=1:2,2:3

# === Backend Configuration ===
# Use latency-based load balancing (most efficient)
LoadBalanceMode=latency
# Required: Set your backend hosts
# Host1=https://your-backend-1.example.com
# Host2=https://your-backend-2.example.com
# Probe_path1=/health
# Probe_path2=/health

# === Connection Settings ===
# Standard keep-alive settings
KeepAliveInitialDelaySecs=60
KeepAlivePingIntervalSecs=90
KeepAliveIdleTimeoutSecs=600
# Disable multiple HTTP/2 connections to save resources
EnableMultipleHttp2Connections=false
# Standard connection limits
MultiConnMaxConns=1000

# === Circuit Breaker (Conservative) ===
# Higher error threshold to avoid premature circuit breaking
CBErrorThreshold=70
CBTimeslice=60
SuccessRate=70

# === Async Operations (Disabled to save resources) ===
AsyncModeEnabled=false

# === Storage & Database (Disabled) ===
StorageDbEnabled=false

# === Authentication (Disabled for simplicity) ===
UseOAuth=false
UseOAuthGov=false
ValidateAuthAppID=false
UseProfiles=false

# === Logging (Minimal) ===
# Reduce logging to minimize I/O and processing
LogConsole=false
LogConsoleEvent=false
LogAllRequestHeaders=false
LogAllResponseHeaders=false
LogPoller=false
LogProbes=false
# Only log essential headers
LogHeaders=

# === Header Management ===
# Minimal header processing
RequiredHeaders=
DisallowedHeaders=
StripResponseHeaders=
ValidateHeaders=
TimeoutHeader=S7PTimeout
TTLHeader=S7PTTL
PriorityKeyHeader=S7PPriorityKey

# === Response Settings ===
AcceptableStatusCodes=200,202,401,403,404,408,410,412,417,400
DefaultTTLSecs=180

# === User Management (Simplified) ===
UserIDFieldName=userId
UniqueUserHeaders=X-UserID
UserPriorityThreshold=0.2

# === Container Settings ===
RequestIDPrefix=S7P-COST