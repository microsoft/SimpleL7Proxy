# Standard Production Environment Template
# A balanced configuration for production workloads with good performance and reasonable resource usage
# Suitable for most production deployments

# === Core Proxy Settings ===
# Balanced worker count for production loads
Workers=15
# Moderate queue length for handling bursts
MaxQueueLength=20
# Standard timeout for production (20 minutes)
Timeout=1200000
# Balanced polling interval
PollInterval=15000
PollTimeout=3000

# === Priority & Queue Management ===
# Three priority levels for production use
DefaultPriority=2
PriorityKeyHeader=S7PPriorityKey
PriorityKeys=high,normal,low
PriorityValues=1,2,3
# Balanced worker allocation
PriorityWorkers=1:5,2:8,3:2

# === Backend Configuration ===
# Latency-based load balancing for optimal performance
LoadBalanceMode=latency
# Required: Set your backend hosts
# Host1=https://your-primary-backend.example.com
# Host2=https://your-secondary-backend.example.com
# Probe_path1=/health
# Probe_path2=/health

# === Connection Settings ===
# Production-grade keep-alive settings
KeepAliveInitialDelaySecs=60
KeepAlivePingIntervalSecs=60
KeepAliveIdleTimeoutSecs=1200
# Enable multiple HTTP/2 connections for better performance
EnableMultipleHttp2Connections=true
MultiConnLifetimeSecs=3600
MultiConnIdleTimeoutSecs=300
MultiConnMaxConns=4000

# === Circuit Breaker (Balanced) ===
# Moderate circuit breaker settings
CBErrorThreshold=50
CBTimeslice=60
SuccessRate=80

# === Async Operations (Enabled) ===
AsyncModeEnabled=true
AsyncTimeout=1800000
AsyncTriggerTimeout=10000

# === Storage & Database (Enabled) ===
StorageDbEnabled=true
StorageDbContainerName=Requests

# === Authentication (Configurable) ===
UseOAuth=false
UseOAuthGov=false
ValidateAuthAppID=false
UseProfiles=false

# === Logging (Balanced) ===
# Moderate logging for production monitoring
LogConsole=true
LogConsoleEvent=false
LogAllRequestHeaders=false
LogAllResponseHeaders=false
LogPoller=true
LogProbes=true
# Log important headers for debugging
LogHeaders=

# === Header Management ===
# Production header management
RequiredHeaders=
DisallowedHeaders=
StripResponseHeaders=
ValidateHeaders=
TimeoutHeader=S7PTimeout
TTLHeader=S7PTTL

# === Response Settings ===
AcceptableStatusCodes=200,202,401,403,404,408,410,412,417,400
DefaultTTLSecs=300

# === User Management ===
UserIDFieldName=userId
UniqueUserHeaders=X-UserID
UserPriorityThreshold=0.1

# === Container Settings ===
RequestIDPrefix=S7P-PROD