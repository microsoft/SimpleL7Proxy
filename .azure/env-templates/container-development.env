# Container Development Environment Template
# Configured for containerized development and testing scenarios
# Use when running SimpleL7Proxy in Docker containers or Azure Container Apps
# Provides extended timeouts and comprehensive logging for debugging containers

# === Core Proxy Settings ===
# Moderate worker count for development
Workers=8
# Small queue for quick feedback
MaxQueueLength=10
# Extended timeout for debugging (30 minutes)
Timeout=1800000
# Moderate polling for development
PollInterval=10000
PollTimeout=2000

# === Priority & Queue Management ===
# Simple priority system for development
DefaultPriority=2
PriorityKeyHeader=S7PPriorityKey
PriorityKeys=test,normal
PriorityValues=1,2
# Simple worker allocation
PriorityWorkers=1:3,2:5

# === Backend Configuration ===
# Simple load balancing for testing
LoadBalanceMode=roundrobin
# Required: Set your development backend hosts
# Host1=https://your-dev-backend.example.com
# Host2=https://your-test-backend.example.com
# Probe_path1=/health
# Probe_path2=/health

# === Connection Settings ===
# Standard connection settings for development
KeepAliveInitialDelaySecs=60
KeepAlivePingIntervalSecs=60
KeepAliveIdleTimeoutSecs=600
# Disable multiple connections for simplicity
EnableMultipleHttp2Connections=false
MultiConnMaxConns=100

# === Circuit Breaker (Disabled for development) ===
# Lenient circuit breaker for development testing
CBErrorThreshold=80
CBTimeslice=120
SuccessRate=60

# === Async Operations (Enabled for testing) ===
AsyncModeEnabled=true
AsyncTimeout=900000
AsyncTriggerTimeout=20000

# === Storage & Database (Enabled for testing) ===
StorageDbEnabled=true
StorageDbContainerName=DevRequests

# === Authentication (Flexible for development) ===
UseOAuth=false
UseOAuthGov=false
ValidateAuthAppID=false
UseProfiles=false

# === Logging (Comprehensive for debugging) ===
# Full logging for development debugging
LogConsole=true
LogConsoleEvent=true
LogAllRequestHeaders=true
LogAllResponseHeaders=true
LogPoller=true
LogProbes=true
# Log all headers except sensitive ones for debugging
LogHeaders=
LogAllRequestHeadersExcept=Authorization,Api-Key
LogAllResponseHeadersExcept=Set-Cookie

# === Header Management ===
# Flexible header management for testing
RequiredHeaders=
DisallowedHeaders=
StripResponseHeaders=
ValidateHeaders=
TimeoutHeader=S7PTimeout
TTLHeader=S7PTTL

# === Response Settings ===
AcceptableStatusCodes=200,202,401,403,404,408,410,412,417,400,500,502,503,504
DefaultTTLSecs=120

# === User Management (Simple) ===
UserIDFieldName=userId
UniqueUserHeaders=X-UserID,X-Test-User
UserPriorityThreshold=0.5

# === Container Settings ===
RequestIDPrefix=S7P-DEV
S7P_EnableDebugEndpoints=true